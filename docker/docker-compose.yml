version: '3'

networks:
    dockercomposefiles_devbadger-network:
     external: true

services:

  wiremock-server:
    image: com.devbadger/wiremock:1.0.0-SNAPSHOT
    ports:
      - 14551:8080
    networks:
      - dockercomposefiles_devbadger-network
    volumes:
      - ./wiremock/mounted/mappings:/app/mappings
      - ./wiremock/mounted/logs:/app/logs

  eureka:
    image: com.devbadger/eureka:1.0.0-SNAPSHOT
    environment:
      - JAVA_OPTS=-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8001
    ports:
      - 11555:8080
      - 12555:8001
    networks:
      - dockercomposefiles_devbadger-network

  config:
    image: com.devbadger/config:1.0.0-SNAPSHOT
    environment:
      - JAVA_OPTS=-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8001
    ports:
      - 11554:8080
      - 12554:8001
    volumes:
      - /Users/$USER/.ssh/id_rsa:/root/.ssh/id_rsa
      - /Users/$USER/.ssh/known_hosts:/root/.ssh/known_hosts
    networks:
      - dockercomposefiles_devbadger-network

  zuul:
    image: com.devbadger/zuul:1.0.0-SNAPSHOT
    environment:
      - JAVA_OPTS=-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8001
    ports:
      - 11554:8080
      - 12554:8001
    networks:
      - dockercomposefiles_devbadger-network

#  security:
#    image: com.devbadger/security:1.0.0-SNAPSHOT
#    environment:
#      - JAVA_OPTS=-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=12551
#    ports:
#      - 11551:11551
#      - 12551:12551
#    networks:
#      - dockercomposefiles_devbadger-network
#
#  gateway:
#    image: com.devbadger/gateway:1.0.0-SNAPSHOT
#    environment:
#      - JAVA_OPTS=-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=12552
#    ports:
#      - 11552:11552
#      - 12552:12552
#    networks:
#      - dockercomposefiles_devbadger-network
#
#  service:
#    image: com.devbadger/service:1.0.0-SNAPSHOT
#    environment:
#      - JAVA_OPTS=-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=12553
#      - VIRTUAL_HOST=*/flex-service/*,https://*/flex-service/*
#    ports:
#      - 11553:11553
#      - 12553:12553
#    expose:
#      - 11553
#    networks:
#      - dockercomposefiles_devbadger-network
#
#  ui:
#    image: com.devbadger/ui:1.0.0-SNAPSHOT
#    environment:
#      - VIRTUAL_HOST=*:80,https://*
#    ports:
#      - 8443:80
#    expose:
#      - 80
#    networks:
#      - dockercomposefiles_devbadger-network